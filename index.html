<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>malllog - 1분 쇼호스트 대본 생성기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-blue-600">malllog</h1>
                        <p class="text-xs text-gray-500">1분 쇼호스트 대본 생성기</p>
                    </div>
                </div>
                
                <!-- Navigation -->
                <nav class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#" id="nav-generator" class="text-blue-600 font-medium border-b-2 border-blue-600 px-3 py-2 text-sm">
                            <i class="fas fa-magic mr-2"></i>대본 생성
                        </a>
                        <a href="#" id="nav-library" class="text-gray-500 hover:text-gray-700 px-3 py-2 text-sm">
                            <i class="fas fa-folder mr-2"></i>라이브러리
                        </a>
                    </div>
                </nav>
                
                <!-- User Profile -->
                <div class="flex items-center">
                    <button id="google-login-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium">
                        <i class="fab fa-google mr-2"></i>Google 로그인
                    </button>
                    
                    <div id="user-profile" class="hidden flex items-center space-x-3">
                        <img id="user-avatar" src="" alt="User" class="w-8 h-8 rounded-full">
                        <span id="user-name" class="text-sm font-medium text-gray-900"></span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Generator View -->
        <div id="generator-view" class="space-y-8">
            <!-- Step 1: URL 파싱 -->
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <div class="flex items-center mb-6">
                    <div class="flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full text-sm font-semibold mr-3">1</div>
                    <h2 class="text-xl font-semibold text-gray-900">여행 상품 URL 입력</h2>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">상품 URL</label>
                        <div class="flex space-x-3">
                            <input type="url" id="url-input" placeholder="https://example.com/travel-product" 
                                   class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <button id="parse-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium">
                                <i class="fas fa-search mr-2"></i>파싱
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Parsing Results -->
                <div id="parsing-empty" class="mt-6 text-center text-gray-500">
                    <i class="fas fa-link text-4xl mb-4"></i>
                    <p>URL을 입력하고 파싱 버튼을 클릭하세요</p>
                </div>
                
                <div id="parsing-loading" class="hidden mt-6 text-center">
                    <div class="inline-flex items-center">
                        <i class="fas fa-spinner fa-spin text-blue-600 mr-3"></i>
                        <span class="text-gray-700">상품 정보를 분석하고 있습니다...</span>
                    </div>
                </div>
                
                <div id="parsing-results" class="hidden mt-6">
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-green-600 mr-2"></i>
                            <span class="text-green-800 font-medium">파싱 완료</span>
                            <span class="ml-auto text-sm text-green-600">
                                신뢰도: <span id="confidence-score">85%</span>
                            </span>
                        </div>
                        <div class="mt-2 bg-green-200 rounded-full h-2">
                            <div id="confidence-bar" class="bg-green-600 h-2 rounded-full" style="width: 85%"></div>
                        </div>
                    </div>
                    
                    <div id="parsed-fields" class="space-y-3">
                        <!-- Parsed fields will be populated here -->
                    </div>
                    
                    <div class="mt-4 flex space-x-3">
                        <button id="edit-fields-btn" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-edit mr-2"></i>필드 수정
                        </button>
                        <button id="reset-btn" class="bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-redo mr-2"></i>초기화
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Step 2: 대본 옵션 설정 -->
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <div class="flex items-center mb-6">
                    <div class="flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full text-sm font-semibold mr-3">2</div>
                    <h2 class="text-xl font-semibold text-gray-900">대본 옵션 설정</h2>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- 진행 방식 -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">진행 방식</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="radio" name="script-type" value="one_host" checked class="text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">1인 진행</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="script-type" value="two_hosts" class="text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">2인 진행</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 톤앤매너 -->
                    <div>
                        <label for="tone-select" class="block text-sm font-medium text-gray-700 mb-2">톤앤매너</label>
                        <select id="tone-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="friendly">친근한</option>
                            <option value="trust">신뢰감 있는</option>
                            <option value="premium">프리미엄</option>
                        </select>
                    </div>
                    
                    <!-- 타겟 고객 -->
                    <div>
                        <label for="target-select" class="block text-sm font-medium text-gray-700 mb-2">타겟 고객</label>
                        <select id="target-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="golf">골프 여행객</option>
                            <option value="leisure">휴양 여행객</option>
                            <option value="package">패키지 여행객</option>
                        </select>
                    </div>
                    
                    <!-- 대본 길이 -->
                    <div>
                        <label for="duration-select" class="block text-sm font-medium text-gray-700 mb-2">대본 길이</label>
                        <select id="duration-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="55">55초</option>
                            <option value="60" selected>60초</option>
                            <option value="65">65초</option>
                            <option value="90">90초</option>
                        </select>
                    </div>
                    
                    <!-- 호스트 스타일 -->
                    <div>
                        <label for="host-style-select" class="block text-sm font-medium text-gray-700 mb-2">호스트 스타일</label>
                        <select id="host-style-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="passionate">🔥 열정적 (홈쇼핑)</option>
                            <option value="friendly">😊 친근한 (라이브커머스)</option>
                            <option value="professional">💼 전문적 (신뢰감)</option>
                        </select>
                    </div>
                    
                    <!-- 구성 타입 -->
                    <div>
                        <label for="structure-type-select" class="block text-sm font-medium text-gray-700 mb-2">구성 타입</label>
                        <select id="structure-type-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="basic">📺 기본형 (홈쇼핑 구조)</option>
                            <option value="storytelling">📖 스토리텔링형</option>
                            <option value="viral">⚡ 숏폼 최적화형</option>
                        </select>
                    </div>
                </div>
                
                <!-- 호스트 이름 설정 (2인 진행 시에만 표시) -->
                <div id="host-names-section" class="hidden mt-6 pt-6 border-t">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">호스트 이름 설정</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="host1-name" class="block text-sm font-medium text-gray-700 mb-2">호스트 1</label>
                            <input type="text" id="host1-name" placeholder="진행자1" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label for="host2-name" class="block text-sm font-medium text-gray-700 mb-2">호스트 2</label>
                            <input type="text" id="host2-name" placeholder="진행자2" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Step 3: 대본 생성 -->
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <div class="flex items-center mb-6">
                    <div class="flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full text-sm font-semibold mr-3">3</div>
                    <h2 class="text-xl font-semibold text-gray-900">대본 생성</h2>
                </div>
                
                <div class="text-center">
                    <button id="generate-script-btn" disabled 
                            class="bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-8 py-3 rounded-lg font-medium text-lg">
                        <i class="fas fa-magic mr-2"></i>대본 생성하기
                    </button>
                    <p class="text-sm text-gray-500 mt-2">URL 파싱 후 대본을 생성할 수 있습니다</p>
                </div>
            </div>
            
            <!-- Script Results -->
            <div id="script-results-section" class="hidden bg-white rounded-xl shadow-sm border p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-gray-900">생성된 대본</h2>
                    
                    <!-- Tab Navigation -->
                    <div class="flex space-x-1 bg-gray-100 rounded-lg p-1">
                        <button id="tab-one-host" class="px-4 py-2 text-sm font-medium rounded-md border-blue-600 text-blue-600">
                            1인 진행
                        </button>
                        <button id="tab-two-host" class="px-4 py-2 text-sm font-medium rounded-md border-transparent text-gray-500 hover:text-gray-700" style="display: none;">
                            2인 진행
                        </button>
                    </div>
                </div>
                
                <!-- One Host Script -->
                <div id="one-host-content" class="space-y-6">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-medium text-gray-900">1인 진행 대본</h3>
                        <div class="flex space-x-2">
                            <button id="play-one-host" class="bg-green-100 hover:bg-green-200 text-green-700 px-3 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-play mr-1"></i>음성 재생
                            </button>
                            <button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-copy mr-1"></i>복사
                            </button>
                            <button class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-download mr-1"></i>다운로드
                            </button>
                        </div>
                    </div>
                    <div id="one-host-script" class="bg-gray-50 p-4 rounded-lg font-mono text-sm whitespace-pre-wrap min-h-[200px]">
                        대본이 여기에 표시됩니다...
                    </div>
                </div>
                
                <!-- Two Host Script -->
                <div id="two-host-content" class="hidden space-y-6">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-medium text-gray-900">2인 진행 대본</h3>
                        <div class="flex space-x-2">
                            <button id="play-two-host" class="bg-green-100 hover:bg-green-200 text-green-700 px-3 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-play mr-1"></i>음성 재생
                            </button>
                            <button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-copy mr-1"></i>복사
                            </button>
                            <button class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-download mr-1"></i>다운로드
                            </button>
                        </div>
                    </div>
                    <div id="two-host-script" class="bg-gray-50 p-4 rounded-lg font-mono text-sm whitespace-pre-wrap min-h-[200px]">
                        대본이 여기에 표시됩니다...
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Library View -->
        <div id="library-view" class="hidden space-y-6">
            <div class="bg-white rounded-xl shadow-sm border p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-gray-900">대본 라이브러리</h2>
                    
                    <div class="flex space-x-4">
                        <input type="text" id="library-search" placeholder="검색..." 
                               class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <select id="library-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">전체</option>
                            <option value="draft">초안</option>
                            <option value="confirmed">확정</option>
                        </select>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">생성일</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">상품명</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">작성자</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">상태</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">작업</th>
                            </tr>
                        </thead>
                        <tbody id="library-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Library data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
    
    <!-- TTS Voice Control Panel -->
    <div id="voice-control-panel" class="hidden fixed bottom-4 right-4 bg-white rounded-lg shadow-lg border p-4 w-80">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-medium text-gray-900">음성 재생</h3>
            <button id="close-voice-control" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="space-y-4">
            <!-- Progress Bar -->
            <div class="space-y-2">
                <div class="flex justify-between text-sm text-gray-600">
                    <span id="current-time">00:00</span>
                    <span id="total-time">00:00</span>
                </div>
                <div class="bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- Controls -->
            <div class="flex items-center justify-center space-x-4">
                <button id="voice-play-pause" class="bg-blue-600 hover:bg-blue-700 text-white w-12 h-12 rounded-full flex items-center justify-center">
                    <i id="voice-play-icon" class="fas fa-play"></i>
                </button>
                <button id="voice-stop" class="bg-gray-500 hover:bg-gray-600 text-white w-10 h-10 rounded-full flex items-center justify-center">
                    <i class="fas fa-stop"></i>
                </button>
            </div>
            
            <!-- Voice Settings -->
            <div class="space-y-3">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">음성 선택</label>
                    <select id="voice-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                        <option value="">기본 음성</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">속도</label>
                        <input type="range" id="voice-rate" min="0.5" max="2" step="0.1" value="0.9" 
                               class="w-full">
                        <div class="text-xs text-gray-500 text-center">
                            <span id="rate-value">0.9x</span>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">음높이</label>
                        <input type="range" id="voice-pitch" min="0.5" max="2" step="0.1" value="1" 
                               class="w-full">
                        <div class="text-xs text-gray-500 text-center">
                            <span id="pitch-value">1.0</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Current Text -->
            <div class="bg-gray-50 p-3 rounded-lg">
                <div class="text-xs text-gray-500 mb-1">현재 재생 중</div>
                <div id="voice-current-text" class="text-sm text-gray-900">음성을 재생하려면 재생 버튼을 클릭하세요</div>
            </div>
        </div>
    </div>
    
    <!-- Edit Fields Modal -->
    <div id="edit-fields-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">필드 수정</h3>
                <button id="close-edit-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="edit-fields-form" class="space-y-4">
                <!-- Form fields will be populated dynamically -->
            </form>
            
            <div class="flex justify-end space-x-3 mt-6">
                <button id="cancel-edit" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">
                    취소
                </button>
                <button id="save-edit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">
                    저장
                </button>
            </div>
        </div>
    </div>
    
    <!-- Reset Modal -->
    <div id="reset-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
            <div class="flex items-center mb-4">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                </div>
                <div class="ml-3">
                    <h3 class="text-lg font-semibold text-gray-900">데이터 초기화</h3>
                    <p class="text-sm text-gray-600 mt-1">모든 데이터가 삭제됩니다. 계속하시겠습니까?</p>
                </div>
            </div>
            
            <div class="flex justify-end space-x-3">
                <button id="cancel-reset" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">
                    취소
                </button>
                <button id="confirm-reset" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg">
                    초기화
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/app.js"></script>
</body>
</html>
